(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),s=n(17),c=n.n(s),a=(n(22),n(3)),u=n(0),i=function(e){var t=e.message,n=e.className;return null===t?null:Object(u.jsx)("div",{className:n,children:t})},l=function(e){var t=e.filter,n=t.state,r=t.setter;return Object(u.jsx)("form",{children:Object(u.jsxs)("div",{children:["Filter shown with: ",Object(u.jsx)("input",{onChange:function(e){var t=e.target.value;console.log("Current filter: ",t),r(t)},value:n})]})})},d=n(4),b=n.n(d),h="https://fullstackcourse-phonebook-vbjk.herokuapp.com/api/persons",f={getPeople:function(){return b.a.get(h).then((function(e){return console.log("Getting from: ",h),console.log(e.data),e.data}))},createPerson:function(e){return b.a.post(h,e).then((function(e){return e.data}))},deletePerson:function(e){return b.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},updatePerson:function(e,t){return b.a.put("".concat(h,"/").concat(e),t).then((function(e){return e.data}))}},j=n(8),m=3e3,p=function(e){var t=e.name,n=e.number,r=e.people,o=e.error,s=e.success,c=t.state,a=r.state,i=n.state,l=t.setter;return Object(u.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),0!==c.length&&0!==i.length)if(void 0!==a.find((function(e){return e.name===c})))!function(){var e=a.findIndex((function(e){return e.name===c})),t="".concat(a[e].name," is already added to phonebook. Replace the old number with a new one?");if(window.confirm(t)){var u=Object(j.a)(Object(j.a)({},a[e]),{},{number:i});console.log("UPDATE: ",u),f.updatePerson(u.id,u).then((function(e){console.log("Success: ",e);var t=a.map((function(t){return t.id!==u.id?t:e}));console.log("Updated array: ",t),r.setter(t),l(""),n.setter(""),s.setter("".concat(u.name,"'s number has been updated successfully!")),setTimeout((function(){return s.setter(null)}),m)})).catch((function(e){e.response.data.error?o.setter(e.response.data.error):o.setter(e.message),setTimeout((function(){o.setter(null)}),m)}))}}();else{console.log("Adding ",{newName:c}," to the phonebook.");var t={name:c,number:i};f.createPerson(t).then((function(e){console.log("Added: ",e),r.setter(a.concat(e)),s.setter("".concat(c," has been added to the phonebook.")),setTimeout((function(){return s.setter(null)}),m),l(""),n.setter("")})).catch((function(e){e.response.data.error?o.setter(e.response.data.error):o.setter(e.message),setTimeout((function(){return o.setter(null)}),m)}))}else alert("Please, enter both the name and the phone number")},children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{onChange:function(e){var t=e.target.value;console.log("Current input state: ",t),l(t)},value:c})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{onChange:function(e){var t=e.target.value;console.log("Current phone number: ",t),n.setter(t)},value:i})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"Add new person"})})]})},O=function(e){var t=e.people,n=e.filter,r=e.success,o=e.error,s=n.state,c=t.state,a=c.filter((function(e){return e.name.toLowerCase().startsWith(s.toLowerCase())}));return 0===a.length?Object(u.jsx)("div",{children:"No people to show."}):a.map((function(e){var n=e.name.indexOf(" ");return n=-1===n?e.name.length:n,Object(u.jsxs)("div",{className:"person",children:["".concat(e.name," ").concat(e.number," "),Object(u.jsxs)("button",{onClick:function(){return function(e){window.confirm("Delete ".concat(e.name," from the phonebook?"))&&f.deletePerson(e.id).then((function(n){var o=c.filter((function(t){return t.id!==e.id}));r.setter("".concat(e.name," has been deleted successfully.")),t.setter(o),setTimeout((function(){return r.setter(null)}),m)})).catch((function(){o.setter("Something went wrong while deleting ".concat(e.name,".")),setTimeout((function(){return o.setter(null)}),m)}))}(e)},children:["Delete ",e.name.slice(0,n)]})]},e.id)}))},g=function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],o=t[1],s=Object(r.useState)(""),c=Object(a.a)(s,2),d=c[0],b=c[1],h=Object(r.useState)(""),j=Object(a.a)(h,2),m=j[0],g=j[1],v=Object(r.useState)(""),x=Object(a.a)(v,2),w=x[0],k=x[1],P=Object(r.useState)(null),C=Object(a.a)(P,2),S=C[0],T=C[1],N=Object(r.useState)(null),y=Object(a.a)(N,2),A=y[0],D=y[1];Object(r.useEffect)((function(){f.getPeople().then((function(e){console.log(e),o(e)}))}),[]);var F={state:w,setter:k},L={state:d,setter:b},E={state:m,setter:g},I={state:n,setter:o},B={state:S,setter:T},J={state:A,setter:D};return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Phonebook"}),Object(u.jsx)(i,{message:S,className:"error"}),Object(u.jsx)(i,{message:A,className:"success"}),Object(u.jsx)(l,{filter:F}),Object(u.jsx)("h3",{children:"Add a new"}),Object(u.jsx)(p,{name:L,number:E,people:I,error:B,success:J}),Object(u.jsx)("h3",{children:"Numbers"}),Object(u.jsx)(O,{people:I,filter:F,error:B,success:J})]})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),o(e),s(e),c(e)}))};c.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(g,{})}),document.getElementById("root")),v()}},[[42,1,2]]]);
//# sourceMappingURL=main.c5c8de8f.chunk.js.map